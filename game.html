<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Game ‚Äî NotesAreBoring</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700;800&family=JetBrains+Mono:wght@500;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .game-page { min-height: 100vh; padding: 20px; }

    /* --- View Switcher (for demo) --- */
    .view-switcher {
      position: fixed; top: 16px; right: 16px; z-index: 200;
      display: flex; gap: 4px; background: var(--bg-card); border: 1px solid var(--border);
      border-radius: var(--radius-sm); padding: 4px;
    }
    .view-switcher button {
      padding: 8px 14px; border: none; border-radius: 6px; cursor: pointer;
      font-family: var(--font-body); font-size: 0.8rem; font-weight: 600;
      background: transparent; color: var(--text-muted); transition: all var(--transition);
    }
    .view-switcher button.active { background: var(--primary); color: white; }

    /* --- Phase Switcher (for demo) --- */
    .phase-switcher {
      position: fixed; top: 16px; left: 16px; z-index: 200;
      display: flex; gap: 4px; background: var(--bg-card); border: 1px solid var(--border);
      border-radius: var(--radius-sm); padding: 4px; flex-wrap: wrap; max-width: 400px;
    }
    .phase-switcher button {
      padding: 6px 10px; border: none; border-radius: 6px; cursor: pointer;
      font-family: var(--font-body); font-size: 0.7rem; font-weight: 600;
      background: transparent; color: var(--text-muted); transition: all var(--transition);
    }
    .phase-switcher button.active { background: var(--accent); color: white; }

    /* --- All views hidden by default --- */
    .game-view { display: none; }
    .game-view.active { display: block; }

    /* --- TEACHER: Lobby --- */
    .teacher-lobby { text-align: center; padding-top: 60px; }
    .join-code-display {
      font-family: var(--font-mono); font-size: 4rem; font-weight: 800;
      letter-spacing: 0.2em; color: var(--accent);
      text-shadow: 0 0 30px var(--accent-glow);
      margin: 24px 0 8px;
    }
    .qr-placeholder {
      width: 160px; height: 160px; background: white; border-radius: var(--radius);
      margin: 20px auto; display: flex; align-items: center; justify-content: center;
      font-size: 0.7rem; color: #333; font-weight: 600;
    }
    .lobby-counter {
      font-family: var(--font-mono); font-size: 2rem; font-weight: 700;
      color: var(--primary-light); margin: 20px 0;
    }

    /* --- TEACHER: Question Display --- */
    .teacher-question { max-width: 900px; margin: 0 auto; padding-top: 40px; }
    .question-header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 24px; flex-wrap: wrap; gap: 12px;
    }
    .question-number { font-family: var(--font-mono); font-weight: 700; color: var(--text-muted); }
    .question-text-large {
      font-family: var(--font-heading); font-size: clamp(1.4rem, 3vw, 2rem);
      font-weight: 700; text-align: center; margin: 32px 0 40px;
    }
    .teacher-answers {
      display: grid; grid-template-columns: 1fr 1fr; gap: 16px; max-width: 700px; margin: 0 auto;
    }
    .teacher-ans {
      padding: 24px; border-radius: var(--radius); font-size: 1.1rem; font-weight: 600;
      color: white; display: flex; align-items: center; gap: 12px;
    }
    .teacher-ans .shape {
      width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem;
    }
    .teacher-ans.red { background: rgba(239, 68, 68, 0.2); border: 2px solid var(--wrong); }
    .teacher-ans.blue { background: rgba(59, 130, 246, 0.2); border: 2px solid #3b82f6; }
    .teacher-ans.yellow { background: rgba(234, 179, 8, 0.2); border: 2px solid var(--streak-yellow); }
    .teacher-ans.green { background: rgba(34, 197, 94, 0.2); border: 2px solid var(--correct); }
    .responses-count {
      text-align: center; margin-top: 24px; color: var(--text-muted);
      font-family: var(--font-mono); font-size: 1.1rem;
    }

    /* --- TEACHER: Reveal --- */
    .reveal-section { max-width: 900px; margin: 0 auto; padding-top: 40px; }
    .reveal-correct {
      text-align: center; margin-bottom: 32px;
      font-family: var(--font-heading); font-size: 1.2rem; color: var(--correct);
    }
    .reveal-answers { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; max-width: 700px; margin: 0 auto; }
    .reveal-ans {
      padding: 20px; border-radius: var(--radius); font-weight: 600; color: white;
      display: flex; align-items: center; justify-content: space-between; opacity: 0.4;
      border: 2px solid var(--border);
    }
    .reveal-ans.is-correct {
      opacity: 1; border-color: var(--correct); background: rgba(34, 197, 94, 0.15);
      box-shadow: 0 0 20px var(--correct-glow);
    }
    .reveal-bar-section {
      max-width: 500px; margin: 32px auto 0;
    }
    .reveal-bar-row {
      display: flex; align-items: center; gap: 12px; margin-bottom: 8px;
    }
    .reveal-bar-label { width: 24px; text-align: center; font-weight: 700; }
    .reveal-bar-track { flex: 1; height: 28px; background: var(--border); border-radius: 4px; overflow: hidden; }
    .reveal-bar-fill { height: 100%; border-radius: 4px; display: flex; align-items: center; padding-left: 10px; font-size: 0.8rem; font-weight: 600; transition: width 0.8s ease; }
    .reveal-bar-pct { width: 50px; text-align: right; font-family: var(--font-mono); font-size: 0.85rem; color: var(--text-muted); }

    /* --- TEACHER: Leaderboard --- */
    .leaderboard-section { max-width: 600px; margin: 0 auto; padding-top: 40px; text-align: center; }
    .leaderboard-title { font-size: 1.5rem; margin-bottom: 24px; }
    .lb-list { display: flex; flex-direction: column; gap: 8px; }

    /* --- TEACHER: Final Podium --- */
    .podium-section { text-align: center; padding-top: 60px; max-width: 700px; margin: 0 auto; }
    .podium-title { font-size: 2rem; margin-bottom: 40px; }
    .podium {
      display: flex; align-items: flex-end; justify-content: center; gap: 16px;
      margin-bottom: 40px; height: 280px;
    }
    .podium-place {
      display: flex; flex-direction: column; align-items: center; gap: 8px;
    }
    .podium-bar {
      width: 120px; border-radius: var(--radius) var(--radius) 0 0; display: flex;
      flex-direction: column; align-items: center; justify-content: flex-end;
      padding: 20px 12px; position: relative;
    }
    .podium-bar.first { height: 220px; background: linear-gradient(180deg, rgba(234, 179, 8, 0.3), rgba(234, 179, 8, 0.1)); border: 2px solid rgba(234, 179, 8, 0.4); border-bottom: none; }
    .podium-bar.second { height: 170px; background: linear-gradient(180deg, rgba(148, 163, 184, 0.2), rgba(148, 163, 184, 0.05)); border: 2px solid rgba(148, 163, 184, 0.3); border-bottom: none; }
    .podium-bar.third { height: 130px; background: linear-gradient(180deg, rgba(205, 127, 50, 0.2), rgba(205, 127, 50, 0.05)); border: 2px solid rgba(205, 127, 50, 0.3); border-bottom: none; }
    .podium-medal { font-size: 2.5rem; }
    .podium-name { font-family: var(--font-heading); font-weight: 700; font-size: 1.1rem; }
    .podium-score { font-family: var(--font-mono); font-weight: 700; color: var(--text-muted); font-size: 0.9rem; }
    .podium-tagline { font-size: 0.8rem; color: var(--text-muted); font-style: italic; margin-top: 4px; }
    .class-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-top: 32px; }

    /* --- STUDENT: Question View --- */
    .student-game { max-width: 480px; margin: 0 auto; padding-top: 20px; }
    .student-header {
      display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;
    }
    .student-score {
      font-family: var(--font-mono); font-weight: 700; font-size: 1.1rem; color: var(--primary-light);
    }
    .student-question {
      font-family: var(--font-heading); font-size: 1.2rem; font-weight: 700;
      text-align: center; margin: 20px 0 24px; min-height: 60px;
    }

    /* --- STUDENT: Result --- */
    .student-result { text-align: center; padding: 32px 0; }
    .result-icon { font-size: 4rem; margin-bottom: 12px; }
    .result-message { font-family: var(--font-heading); font-size: 1.4rem; font-weight: 700; margin-bottom: 8px; }
    .result-points { font-family: var(--font-mono); font-size: 2rem; font-weight: 800; color: var(--primary-light); }
    .result-breakdown { display: flex; justify-content: center; gap: 24px; margin-top: 16px; }
    .result-breakdown-item { text-align: center; }
    .result-breakdown-item .val { font-family: var(--font-mono); font-weight: 700; }
    .result-breakdown-item .lbl { font-size: 0.75rem; color: var(--text-muted); }

    /* --- STUDENT: Final --- */
    .student-final { text-align: center; padding-top: 40px; }
    .final-rank {
      font-family: var(--font-mono); font-size: 5rem; font-weight: 800;
      background: linear-gradient(135deg, var(--primary-light), var(--accent));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }

    @media (max-width: 600px) {
      .teacher-answers, .reveal-answers { grid-template-columns: 1fr; }
      .podium-bar { width: 90px; }
      .podium-bar.first { height: 180px; }
      .podium-bar.second { height: 140px; }
      .podium-bar.third { height: 110px; }
      .phase-switcher { max-width: 260px; font-size: 0.6rem; }
    }
  </style>
</head>
<body class="grain-overlay">

  <!-- View Switcher (Demo controls) -->
  <div class="view-switcher">
    <button class="active" onclick="switchView('teacher', this)">üñ• Teacher</button>
    <button onclick="switchView('student', this)">üì± Student</button>
  </div>

  <!-- Phase Switcher (Demo controls) -->
  <div class="phase-switcher" id="phase-switcher">
    <!-- Buttons populated per view -->
  </div>

  <div class="game-page">

    <!-- ============== TEACHER VIEWS ============== -->

    <!-- Teacher: Lobby -->
    <div class="game-view teacher-view active" id="teacher-lobby">
      <div class="teacher-lobby">
        <span class="badge badge-purple" style="font-size: 0.85rem;">Cell Biology ‚Äî Chapter 5</span>
        <h2 style="margin-top: 12px;">Join at <span style="color: var(--accent);">notesareboring.com/play</span></h2>
        <div class="join-code-display">482 917</div>
        <div class="qr-placeholder">[QR CODE]</div>
        <div style="font-family: 'Caveat', cursive; color: var(--text-muted); font-size: 1.2rem; margin: 8px 0;">pull out your phones... yes, you have permission this time üì±</div>
        <div class="lobby-counter"><span id="t-lobby-count">0</span> players joined</div>
        <div class="lobby-players" id="t-lobby-players" style="max-width: 600px; margin: 0 auto;"></div>
        <button class="btn btn-accent btn-lg" style="margin-top: 32px;" onclick="switchPhase('teacher-question')">
          Start Game ‚Üí
        </button>
      </div>
    </div>

    <!-- Teacher: Question -->
    <div class="game-view teacher-view" id="teacher-question">
      <div class="teacher-question">
        <div class="question-header">
          <span class="question-number">Question 3 / 15</span>
          <span class="badge badge-orange">Medium</span>
          <div class="progress-dots">
            <span class="progress-dot correct"></span>
            <span class="progress-dot wrong"></span>
            <span class="progress-dot active"></span>
            <span class="progress-dot"></span><span class="progress-dot"></span>
            <span class="progress-dot"></span><span class="progress-dot"></span>
            <span class="progress-dot"></span><span class="progress-dot"></span>
            <span class="progress-dot"></span><span class="progress-dot"></span>
            <span class="progress-dot"></span><span class="progress-dot"></span>
            <span class="progress-dot"></span><span class="progress-dot"></span>
          </div>
        </div>
        <div class="timer-bar">
          <div class="timer-bar-fill" id="teacher-timer" style="width: 65%;"></div>
        </div>
        <div class="question-text-large">
          Which organelle is responsible for producing ATP through cellular respiration?
        </div>
        <div class="teacher-answers">
          <div class="teacher-ans red"><span class="shape">üî¥</span> Nucleus</div>
          <div class="teacher-ans blue"><span class="shape">üîµ</span> Mitochondria</div>
          <div class="teacher-ans yellow"><span class="shape">üü°</span> Ribosome</div>
          <div class="teacher-ans green"><span class="shape">üü¢</span> Golgi Apparatus</div>
        </div>
        <div class="responses-count">
          <span id="response-counter">18</span> / 23 answered
        </div>
      </div>
    </div>

    <!-- Teacher: Reveal -->
    <div class="game-view teacher-view" id="teacher-reveal">
      <div class="reveal-section">
        <div style="text-align: center; margin-bottom: 12px;">
          <span class="question-number">Question 3 / 15</span>
        </div>
        <div style="text-align: center; font-family: var(--font-heading); font-size: 1.2rem; margin-bottom: 24px; color: var(--text-secondary);">
          Which organelle is responsible for producing ATP through cellular respiration?
        </div>
        <div class="reveal-correct">‚úÖ Correct Answer: Mitochondria</div>
        <div class="reveal-answers">
          <div class="reveal-ans"><span>üî¥ Nucleus</span><span style="font-family: var(--font-mono);">3</span></div>
          <div class="reveal-ans is-correct"><span>üîµ Mitochondria ‚úì</span><span style="font-family: var(--font-mono);">15</span></div>
          <div class="reveal-ans"><span>üü° Ribosome</span><span style="font-family: var(--font-mono);">4</span></div>
          <div class="reveal-ans"><span>üü¢ Golgi Apparatus</span><span style="font-family: var(--font-mono);">1</span></div>
        </div>
        <div class="reveal-bar-section">
          <div style="text-align: center; margin-bottom: 16px; font-size: 0.9rem; color: var(--text-muted);">Answer Distribution</div>
          <div class="reveal-bar-row">
            <div class="reveal-bar-label">üî¥</div>
            <div class="reveal-bar-track"><div class="reveal-bar-fill" style="width: 13%; background: var(--wrong);">3</div></div>
            <div class="reveal-bar-pct">13%</div>
          </div>
          <div class="reveal-bar-row">
            <div class="reveal-bar-label">üîµ</div>
            <div class="reveal-bar-track"><div class="reveal-bar-fill" style="width: 65%; background: #3b82f6;">15</div></div>
            <div class="reveal-bar-pct">65%</div>
          </div>
          <div class="reveal-bar-row">
            <div class="reveal-bar-label">üü°</div>
            <div class="reveal-bar-track"><div class="reveal-bar-fill" style="width: 18%; background: var(--streak-yellow);">4</div></div>
            <div class="reveal-bar-pct">18%</div>
          </div>
          <div class="reveal-bar-row">
            <div class="reveal-bar-label">üü¢</div>
            <div class="reveal-bar-track"><div class="reveal-bar-fill" style="width: 4%; background: var(--correct);">1</div></div>
            <div class="reveal-bar-pct">4%</div>
          </div>
        </div>
        <div style="text-align: center; margin-top: 24px; padding: 16px; background: var(--bg-card); border-radius: var(--radius-sm); border: 1px solid var(--border);">
          <div style="font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Fun Fact</div>
          <div style="margin-top: 6px; font-size: 0.95rem;">A single cell can contain up to 2,000 mitochondria, making up about 25% of the cell's volume!</div>
        </div>
        <div style="text-align: center; margin-top: 24px;">
          <button class="btn btn-primary btn-lg" onclick="switchPhase('teacher-leaderboard')">Show Leaderboard ‚Üí</button>
        </div>
      </div>
    </div>

    <!-- Teacher: Leaderboard -->
    <div class="game-view teacher-view" id="teacher-leaderboard">
      <div class="leaderboard-section">
        <div class="leaderboard-title">üèÜ Leaderboard</div>
        <div class="lb-list">
          <div class="leaderboard-row">
            <div class="leaderboard-rank">üëë</div>
            <div>
              <div class="leaderboard-name">Alex</div>
              <div class="leaderboard-tagline" style="font-family: 'Caveat', cursive; font-size: 0.95rem;">absolutely COOKED everyone üî•</div>
            </div>
            <div class="leaderboard-score">4,350</div>
          </div>
          <div class="leaderboard-row">
            <div class="leaderboard-rank">ü•à</div>
            <div>
              <div class="leaderboard-name">Jordan</div>
              <div class="leaderboard-tagline" style="font-family: 'Caveat', cursive; font-size: 0.95rem;">so close, yet so far üò§</div>
            </div>
            <div class="leaderboard-score">4,100</div>
          </div>
          <div class="leaderboard-row">
            <div class="leaderboard-rank">ü•â</div>
            <div>
              <div class="leaderboard-name">Taylor</div>
              <div class="leaderboard-tagline" style="font-family: 'Caveat', cursive; font-size: 0.95rem;">podium finish, respect ü´°</div>
            </div>
            <div class="leaderboard-score">3,800</div>
          </div>
          <div class="leaderboard-row">
            <div class="leaderboard-rank" style="color: var(--text-muted);">4</div>
            <div><div class="leaderboard-name">Morgan</div></div>
            <div class="leaderboard-score">3,500</div>
          </div>
          <div class="leaderboard-row">
            <div class="leaderboard-rank" style="color: var(--text-muted);">5</div>
            <div><div class="leaderboard-name">Casey</div></div>
            <div class="leaderboard-score">3,200</div>
          </div>
        </div>
        <div style="margin-top: 32px;">
          <button class="btn btn-accent btn-lg" onclick="switchPhase('teacher-question')">Next Question ‚Üí</button>
        </div>
      </div>
    </div>

    <!-- Teacher: Final Podium -->
    <div class="game-view teacher-view" id="teacher-final">
      <div class="podium-section">
        <div class="podium-title">üéâ Game Over!</div>
        <div style="font-family: 'Caveat', cursive; font-size: 1.4rem; color: var(--accent); margin-top: -24px; margin-bottom: 24px;">that was intense. everyone take a breath.</div>
        <div class="podium">
          <div class="podium-place">
            <div class="podium-name">Jordan</div>
            <div class="podium-score">12,400</div>
            <div class="podium-bar second">
              <div class="podium-medal">ü•à</div>
            </div>
          </div>
          <div class="podium-place">
            <div class="podium-name" style="font-size: 1.3rem;">Alex</div>
            <div class="podium-score">14,200</div>
            <div class="podium-bar first">
              <div class="podium-medal">üëë</div>
            </div>
          </div>
          <div class="podium-place">
            <div class="podium-name">Taylor</div>
            <div class="podium-score">11,800</div>
            <div class="podium-bar third">
              <div class="podium-medal">ü•â</div>
            </div>
          </div>
        </div>
        <div style="text-align: center; margin-bottom: 12px; font-family: 'Caveat', cursive; font-size: 1.2rem; color: var(--text-muted);">
          üíÄ Riley ‚Äî maybe read the notes next time (they're boring but they help)
        </div>
        <div class="class-summary">
          <div class="card stat-card">
            <div class="stat-number" style="color: var(--correct); font-size: 2rem;">73%</div>
            <div class="stat-label">Class Average</div>
          </div>
          <div class="card stat-card">
            <div class="stat-number" style="color: var(--primary-light); font-size: 2rem;">23</div>
            <div class="stat-label">Students</div>
          </div>
          <div class="card stat-card">
            <div class="stat-number" style="color: var(--streak-orange); font-size: 2rem;">4.1s</div>
            <div class="stat-label">Avg Response</div>
          </div>
          <div class="card stat-card">
            <div class="stat-number" style="color: var(--accent); font-size: 2rem;">7</div>
            <div class="stat-label">Best Streak</div>
          </div>
        </div>
        <div style="margin-top: 32px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
          <a href="dashboard.html" class="btn btn-primary btn-lg">View Full Results</a>
          <button class="btn btn-outline btn-lg">Play Again</button>
        </div>
      </div>
    </div>

    <!-- ============== STUDENT VIEWS ============== -->

    <!-- Student: Question -->
    <div class="game-view student-view" id="student-question">
      <div class="student-game">
        <div class="student-header">
          <span class="question-number">Q3 / 15</span>
          <div class="streak-display animate-streak">üî• 3 streak!</div>
          <span class="student-score">3,200 pts</span>
        </div>
        <div class="timer-bar">
          <div class="timer-bar-fill warning" style="width: 45%;"></div>
        </div>
        <div class="student-question">
          Which organelle is responsible for producing ATP through cellular respiration?
        </div>
        <div class="answer-grid">
          <button class="answer-btn red" onclick="selectAnswer(this)">üî¥ Nucleus</button>
          <button class="answer-btn blue" onclick="selectAnswer(this)">üîµ Mitochondria</button>
          <button class="answer-btn yellow" onclick="selectAnswer(this)">üü° Ribosome</button>
          <button class="answer-btn green" onclick="selectAnswer(this)">üü¢ Golgi Apparatus</button>
        </div>
      </div>
    </div>

    <!-- Student: Result (Correct) -->
    <div class="game-view student-view" id="student-correct">
      <div class="student-game">
        <div class="student-result">
          <div class="result-icon animate-bounce-in">üéâ</div>
          <div class="result-message" style="color: var(--correct);">GENIUS! üß†</div>
          <div class="result-points">+1,350</div>
          <div class="result-breakdown">
            <div class="result-breakdown-item">
              <div class="val" style="color: var(--correct);">+1,000</div>
              <div class="lbl">Correct</div>
            </div>
            <div class="result-breakdown-item">
              <div class="val" style="color: var(--streak-yellow);">+250</div>
              <div class="lbl">Speed</div>
            </div>
            <div class="result-breakdown-item">
              <div class="val" style="color: var(--streak-orange);">+100</div>
              <div class="lbl">Streak x4</div>
            </div>
          </div>
          <div style="margin-top: 24px;">
            <div class="streak-display animate-streak" style="justify-content: center; font-size: 1.5rem;">
              üî•üî•üî• 4 STREAK ‚Äî ON FIRE! Are you cheating?! (jk... unless?)
            </div>
          </div>
          <div style="margin-top: 16px; font-size: 0.9rem; color: var(--text-muted);">
            Current rank: <strong style="color: var(--primary-light);">2nd</strong> of 23
          </div>
          <div class="card" style="margin-top: 20px; text-align: left; padding: 16px;">
            <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 4px;">Fun Fact</div>
            <div style="font-size: 0.9rem;">A single cell can contain up to 2,000 mitochondria!</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Student: Result (Wrong) -->
    <div class="game-view student-view" id="student-wrong">
      <div class="student-game">
        <div class="student-result">
          <div class="result-icon animate-shake">üò¨</div>
          <div class="result-message" style="color: var(--wrong);">Oof. üíÄ</div>
          <div style="color: var(--text-muted); font-size: 1rem; margin-top: 8px;">
            The answer was <strong style="color: var(--correct);">Mitochondria</strong>
          </div>
          <div style="margin-top: 8px; font-family: 'Caveat', cursive; font-size: 1.2rem; color: var(--text-muted);">
            We'll pretend that didn't happen. üôà
          </div>
          <div class="result-points" style="color: var(--wrong);">+0</div>
          <div style="margin-top: 16px; font-size: 0.9rem; color: var(--text-muted);">
            Streak reset üíî &nbsp;|&nbsp; Rank: <strong>8th</strong> of 23
          </div>
          <div class="card" style="margin-top: 20px; text-align: left; padding: 16px;">
            <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 4px;">Explanation</div>
            <div style="font-size: 0.9rem;">Mitochondria are the "powerhouse of the cell" ‚Äî they convert glucose into ATP through cellular respiration.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Student: Final -->
    <div class="game-view student-view" id="student-final">
      <div class="student-game">
        <div class="student-final">
          <div style="font-size: 1rem; color: var(--text-muted); margin-bottom: 8px;">Game Over! You placed</div>
          <div class="final-rank">#2</div>
          <div style="font-family: 'Caveat', cursive; font-size: 1.8rem; font-weight: 700; margin: 8px 0; color: var(--accent);">
            So close, yet so far ü•à
          </div>
          <div style="margin-top: 24px;">
            <div class="card" style="display: inline-block; padding: 20px 40px;">
              <div class="stat-number" style="color: var(--primary-light); font-size: 2.5rem;">12,400</div>
              <div class="stat-label">Total Points</div>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 24px;">
            <div class="card" style="padding: 16px;">
              <div style="font-family: var(--font-mono); font-size: 1.5rem; font-weight: 800; color: var(--correct);">12/15</div>
              <div style="font-size: 0.75rem; color: var(--text-muted);">Correct</div>
            </div>
            <div class="card" style="padding: 16px;">
              <div style="font-family: var(--font-mono); font-size: 1.5rem; font-weight: 800; color: var(--streak-orange);">7</div>
              <div style="font-size: 0.75rem; color: var(--text-muted);">Best Streak</div>
            </div>
            <div class="card" style="padding: 16px;">
              <div style="font-family: var(--font-mono); font-size: 1.5rem; font-weight: 800; color: var(--streak-yellow);">3.2s</div>
              <div style="font-size: 0.75rem; color: var(--text-muted);">Avg Speed</div>
            </div>
          </div>
          <div style="margin-top: 32px; font-family: 'Caveat', cursive; font-size: 1.3rem; color: var(--text-muted);">
            Thanks for playing! Now go tell your teacher you want to play again. Use your best puppy eyes. ü•∫
          </div>
        </div>
      </div>
    </div>

  </div>

  <script>
    let currentView = 'teacher';
    const teacherPhases = ['teacher-lobby', 'teacher-question', 'teacher-reveal', 'teacher-leaderboard', 'teacher-final'];
    const studentPhases = ['student-question', 'student-correct', 'student-wrong', 'student-final'];
    let currentPhase = 'teacher-lobby';

    function switchView(view, btn) {
      currentView = view;
      document.querySelectorAll('.view-switcher button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      // Hide all views
      document.querySelectorAll('.game-view').forEach(v => v.classList.remove('active'));

      const phases = view === 'teacher' ? teacherPhases : studentPhases;
      currentPhase = phases[0];
      document.getElementById(currentPhase).classList.add('active');
      buildPhaseButtons();
    }

    function switchPhase(phase) {
      document.querySelectorAll('.game-view').forEach(v => v.classList.remove('active'));
      document.getElementById(phase).classList.add('active');
      currentPhase = phase;
      buildPhaseButtons();
    }

    function buildPhaseButtons() {
      const phases = currentView === 'teacher' ? teacherPhases : studentPhases;
      const container = document.getElementById('phase-switcher');
      container.innerHTML = phases.map(p => {
        const label = p.replace('teacher-', '').replace('student-', '');
        const isActive = p === currentPhase ? 'active' : '';
        return `<button class="${isActive}" onclick="switchPhase('${p}')">${label}</button>`;
      }).join('');
    }

    function selectAnswer(btn) {
      document.querySelectorAll('.answer-btn').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      // After a moment, show result
      setTimeout(() => switchPhase('student-correct'), 600);
    }

    // Lobby animation
    const lobbyNames = ['Alex', 'Jordan', 'Taylor', 'Morgan', 'Casey', 'Riley', 'Drew', 'Sam', 'Avery', 'Quinn', 'Skyler', 'Charlie', 'Pat', 'Blake', 'Jamie', 'Frankie', 'Dakota', 'Reese', 'Emery', 'Harper', 'Finley', 'Rowan', 'Sage'];
    let lobbyCount = 0;
    function addLobbyPlayer() {
      if (lobbyCount >= lobbyNames.length) return;
      const name = lobbyNames[lobbyCount];
      const el = document.createElement('div');
      el.className = 'lobby-player';
      el.textContent = name;
      document.getElementById('t-lobby-players').appendChild(el);
      lobbyCount++;
      document.getElementById('t-lobby-count').textContent = lobbyCount;
    }
    // Add players periodically
    let lobbyInterval = setInterval(() => addLobbyPlayer(), 600);
    setTimeout(() => clearInterval(lobbyInterval), 15000);

    // Init
    buildPhaseButtons();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/supabase-client.js"></script>
</body>
</html>
