<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Notes ‚Äî NotesAreBoring</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700;800&family=JetBrains+Mono:wght@500;700;800&family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    /* Handwritten font */
    .handwritten { font-family: var(--font-handwritten, 'Caveat'), cursive; }

    /* Grain overlay */
    body.grain-overlay::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background-image:
        url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' seed='2'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
      z-index: 9999;
    }

    /* Logo spin animation */
    .navbar-brand .mascot {
      display: inline-block;
      animation: logo-spin 2s ease-in-out infinite;
    }
    @keyframes logo-spin {
      0%, 100% { transform: rotate(0deg); }
      50% { transform: rotate(10deg); }
    }

    /* Jelly hover animation */
    .jelly-hover {
      animation: none;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .jelly-hover:hover {
      animation: jelly 0.5s ease-in-out;
    }
    @keyframes jelly {
      0%, 100% { transform: scale(1, 1); }
      25% { transform: scale(1.1, 0.9); }
      50% { transform: scale(0.95, 1.05); }
      75% { transform: scale(1.05, 0.95); }
    }

    /* Party button */
    .party-btn {
      position: relative;
      overflow: hidden;
    }
    .party-btn::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        45deg,
        transparent 30%,
        rgba(255, 255, 255, 0.1) 50%,
        transparent 70%
      );
      animation: party-shimmer 2s infinite;
    }
    @keyframes party-shimmer {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }
    .party-btn:hover::before {
      animation: party-shimmer 0.8s infinite;
    }

    /* Confetti */
    .confetti {
      position: fixed;
      z-index: 1000;
      pointer-events: none;
    }
    @keyframes confetti-fall {
      to {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* Sticky note annotation */
    .sticky-note {
      position: relative;
      background: #fef08a;
      padding: 16px;
      border-radius: 4px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
      transform: rotate(-2deg);
      margin-top: 16px;
      border: 1px solid #fef3c7;
      font-family: 'Caveat', cursive;
      font-size: 1rem;
      color: #7c2d12;
    }
    .sticky-note::before {
      content: '';
      position: absolute;
      top: -8px;
      left: 20px;
      width: 16px;
      height: 16px;
      background: #f3e8ff;
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
    }

    .upload-page { padding-top: 100px; min-height: 100vh; }
    .upload-container { max-width: 640px; margin: 0 auto; }
    .upload-header { text-align: center; margin-bottom: 40px; position: relative; }
    .upload-header h1 { font-size: 2rem; margin-bottom: 12px; }
    .upload-header .annotation { display: block; font-family: 'Caveat', cursive; font-size: 1.1rem; color: var(--accent); font-weight: 500; margin-top: 4px; }
    .upload-header p { color: var(--text-secondary); }
    .file-types { display: flex; gap: 8px; justify-content: center; margin-top: 16px; }
    /* Processing states */
    .upload-state { display: none; }
    .upload-state.active { display: block; }
    /* Processing animation */
    .processing-steps { display: flex; flex-direction: column; gap: 16px; margin-top: 32px; }
    .processing-step {
      display: flex; align-items: center; gap: 14px; padding: 16px 20px;
      background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
      opacity: 0.3; transition: all 0.5s ease;
    }
    .processing-step.active { opacity: 1; border-color: var(--primary); }
    .processing-step.done { opacity: 1; border-color: var(--correct); }
    .processing-step .step-icon { font-size: 1.3rem; width: 28px; text-align: center; }
    .processing-step .step-text { flex: 1; font-weight: 500; }
    .processing-step .step-status { font-size: 0.85rem; color: var(--text-muted); }
    .processing-step.active .step-status { color: var(--primary-light); }
    .processing-step.done .step-status { color: var(--correct); }
    /* Spinner */
    .spinner {
      width: 20px; height: 20px; border: 2px solid var(--border-light);
      border-top-color: var(--primary); border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    /* Done state */
    .done-card {
      text-align: center; padding: 48px 32px;
      background: var(--bg-card); border: 1px solid var(--correct);
      border-radius: var(--radius-lg); box-shadow: 0 0 40px var(--correct-glow);
    }
    .done-icon { font-size: 4rem; margin-bottom: 16px; animation: bounce-in 0.5s ease; }
    .done-card h2 { font-size: 1.6rem; margin-bottom: 8px; }
    .done-card p { color: var(--text-secondary); margin-bottom: 28px; }
    .done-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 28px; }
    .done-stat { text-align: center; }
    .done-stat-num { font-family: var(--font-mono); font-size: 1.5rem; font-weight: 800; color: var(--primary-light); }
    .done-stat-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; }
    .done-actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
  </style>
</head>
<body class="grain-overlay">

  <!-- Navbar -->
  <nav class="navbar">
    <div class="container">
      <a href="index.html" class="navbar-brand">
        <img src="notesareboring.png" alt="NotesAreBoring" class="logo-img">
      </a>
      <ul class="navbar-links">
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="upload.html" style="color: var(--text-primary);">Upload</a></li>
        <li><a href="pricing.html">Upgrade</a></li>
      </ul>
      <div class="navbar-actions">
        <span style="color: var(--text-muted); font-size: 0.85rem;">Ms. Johnson</span>
        <div style="width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--accent)); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85rem;">MJ</div>
      </div>
    </div>
  </nav>

  <div class="upload-page">
    <div class="upload-container" style="padding: 0 24px;">

      <div class="upload-header">
        <h1>Upload Your <span class="text-gradient">Boring Notes</span></h1>
        <span class="annotation handwritten">(we promise not to laugh... much)</span>
        <p>We'll turn them into 10 quiz questions faster than your students can say "this is boring"</p>
        <div class="file-types">
          <span class="badge badge-purple">PDF</span>
          <span class="badge badge-purple">DOCX</span>
          <span class="badge badge-purple">PPTX</span>
          <span class="badge badge-pink">Max 10MB</span>
        </div>
        <div class="sticky-note">üìå Pro tip: PDFs work best (don't ask us why)</div>
      </div>

      <!-- State 1: Dropzone -->
      <div class="upload-state active" id="state-upload">
        <div class="dropzone jelly-hover" id="dropzone"
             ondragover="event.preventDefault(); this.classList.add('dragover')"
             ondragleave="this.classList.remove('dragover')"
             ondrop="event.preventDefault(); this.classList.remove('dragover'); startProcessing()"
             onclick="document.getElementById('file-input').click()">
          <div class="dropzone-icon animate-float">üìé</div>
          <div class="dropzone-title">Drop your boring notes here. Go on. We've seen worse.</div>
          <div class="dropzone-sub handwritten" style="font-size: 0.95rem; margin-top: 8px;">(yes, even that 47-page PDF from 2019)</div>
          <input type="file" id="file-input" accept=".pdf,.docx,.pptx" style="display: none;" onchange="startProcessing()">
        </div>

        <div style="text-align: center; margin-top: 20px; color: var(--text-muted); font-size: 0.85rem;">
          or click to browse your files
        </div>
      </div>

      <!-- State 2: Processing -->
      <div class="upload-state" id="state-processing">
        <div class="card" style="padding: 32px;">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
            <span style="font-size: 1.5rem;">üìÑ</span>
            <div>
              <div style="font-weight: 600;">bio_chapter5.pdf</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">2.4 MB</div>
            </div>
          </div>
          <div class="timer-bar">
            <div class="timer-bar-fill" id="progress-bar" style="width: 0%; background: linear-gradient(90deg, var(--primary), var(--accent));"></div>
          </div>
        </div>

        <div class="processing-steps" id="processing-steps">
          <div class="processing-step" id="step-1">
            <span class="step-icon">üìÑ</span>
            <span class="step-text">Extracting text from your notes...</span>
            <span class="step-status">waiting</span>
          </div>
          <div class="processing-step" id="step-2">
            <span class="step-icon">üîç</span>
            <span class="step-text">Reading your notes... yikes, these ARE boring... üò¨</span>
            <span class="step-status">waiting</span>
          </div>
          <div class="processing-step" id="step-3">
            <span class="step-icon">üß†</span>
            <span class="step-text">Working our magic on your notes... (it's going fast)</span>
            <span class="step-status">waiting</span>
          </div>
          <div class="processing-step" id="step-4">
            <span class="step-icon">‚ú®</span>
            <span class="step-text">Sprinkling in the fun... almost done... üéâ</span>
            <span class="step-status">waiting</span>
          </div>
        </div>
      </div>

      <!-- State 3: Done -->
      <div class="upload-state" id="state-done">
        <div class="done-card">
          <div class="done-icon">üí•</div>
          <h2>BAM! üí• 10 questions generated.</h2>
          <p class="handwritten" style="font-size: 1.1rem; color: var(--accent); margin-bottom: 8px;">your notes are officially fun now. you're welcome.</p>
          <p style="color: var(--text-secondary); font-size: 0.9rem;">Time to make your students actually pay attention</p>

          <div class="done-stats">
            <div class="done-stat">
              <div class="done-stat-num">7</div>
              <div class="done-stat-label">Multiple Choice</div>
            </div>
            <div class="done-stat">
              <div class="done-stat-num">3</div>
              <div class="done-stat-label">True / False</div>
            </div>
            <div class="done-stat">
              <div class="done-stat-num">3</div>
              <div class="done-stat-label">Difficulty Levels</div>
            </div>
          </div>

          <!-- Sample questions preview -->
          <div style="text-align: left; margin-bottom: 24px;">
            <div style="font-weight: 600; font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 12px;">Sample Questions</div>
            <div style="display: flex; flex-direction: column; gap: 8px;">
              <div style="padding: 12px 16px; background: rgba(124, 58, 237, 0.08); border-radius: var(--radius-sm); font-size: 0.9rem; display: flex; justify-content: space-between; align-items: center;">
                <span>What is the primary function of mitochondria?</span>
                <span class="handwritten badge badge-green" style="font-size: 0.75rem; font-family: 'Caveat', cursive;">Easy üòä</span>
              </div>
              <div style="padding: 12px 16px; background: rgba(124, 58, 237, 0.08); border-radius: var(--radius-sm); font-size: 0.9rem; display: flex; justify-content: space-between; align-items: center;">
                <span>True or False: Osmosis requires energy from ATP.</span>
                <span class="handwritten badge badge-orange" style="font-size: 0.75rem; font-family: 'Caveat', cursive;">Medium ü§î</span>
              </div>
              <div style="padding: 12px 16px; background: rgba(124, 58, 237, 0.08); border-radius: var(--radius-sm); font-size: 0.9rem; display: flex; justify-content: space-between; align-items: center;">
                <span>Which organelle would be most affected by a lipid synthesis inhibitor?</span>
                <span class="handwritten badge badge-pink" style="font-size: 0.75rem; font-family: 'Caveat', cursive;">Hard üß†</span>
              </div>
            </div>
          </div>

          <div class="done-actions">
            <a href="game.html" class="btn btn-accent btn-lg party-btn jelly-hover">Start a Game Now ‚Üí</a>
            <a href="dashboard.html" class="btn btn-outline jelly-hover">Save to Dashboard</a>
          </div>
        </div>
      </div>

    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <span class="handwritten" style="font-size: 1rem;">&copy; 2026 NotesAreBoring. Making notes fun since yesterday.</span>
    </div>
  </footer>

  <script>
    function spawnConfetti() {
      const confettiColors = ['#FF6B6B', '#4ECDC4', '#FFE66D', '#95E1D3', '#F38181', '#AA96DA', '#FCBAD3'];
      const confettiCount = 50;

      for (let i = 0; i < confettiCount; i++) {
        const confetti = document.createElement('div');
        confetti.classList.add('confetti');
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
        confetti.style.width = (Math.random() * 8 + 4) + 'px';
        confetti.style.height = (Math.random() * 8 + 4) + 'px';
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        confetti.style.animation = `confetti-fall ${Math.random() * 2 + 2}s ease-in forwards`;
        confetti.style.animationDelay = (Math.random() * 0.5) + 's';
        document.body.appendChild(confetti);

        setTimeout(() => confetti.remove(), 4000);
      }
    }

    function startProcessing() {
      // Switch to processing state
      document.getElementById('state-upload').classList.remove('active');
      document.getElementById('state-processing').classList.add('active');

      const steps = [
        { id: 'step-1', delay: 500, duration: 1200, progress: 20 },
        { id: 'step-2', delay: 1700, duration: 1500, progress: 45 },
        { id: 'step-3', delay: 3200, duration: 2000, progress: 80 },
        { id: 'step-4', delay: 5200, duration: 1000, progress: 100 },
      ];

      const bar = document.getElementById('progress-bar');

      steps.forEach((step, i) => {
        // Activate step
        setTimeout(() => {
          const el = document.getElementById(step.id);
          el.classList.add('active');
          el.querySelector('.step-status').textContent = 'working...';
          bar.style.width = step.progress + '%';
        }, step.delay);

        // Complete step
        setTimeout(() => {
          const el = document.getElementById(step.id);
          el.classList.remove('active');
          el.classList.add('done');
          el.querySelector('.step-icon').textContent = '‚úÖ';
          el.querySelector('.step-status').textContent = 'done';
        }, step.delay + step.duration);
      });

      // Switch to done state
      setTimeout(() => {
        document.getElementById('state-processing').classList.remove('active');
        document.getElementById('state-done').classList.add('active');
        spawnConfetti();
      }, 6500);
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/supabase-client.js"></script>
</body>
</html>
