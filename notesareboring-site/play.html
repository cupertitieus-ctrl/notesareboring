<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Join a Game â€” NotesAreBoring</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700;800&family=JetBrains+Mono:wght@500;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .play-page {
      min-height: 100vh; display: flex; align-items: center;
      justify-content: center; padding: 24px; position: relative;
    }
    .play-page::before {
      content: ''; position: absolute; top: 20%; left: 50%; transform: translateX(-50%);
      width: 500px; height: 500px;
      background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%); pointer-events: none;
    }
    .join-card {
      background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg);
      padding: 48px 40px; max-width: 440px; width: 100%; text-align: center;
      position: relative; z-index: 1; box-shadow: var(--shadow);
    }
    .join-card h1 { font-size: 1.8rem; margin-bottom: 8px; }
    .join-card .subtitle { color: var(--text-secondary); margin-bottom: 24px; }
    .form-group { margin-bottom: 16px; text-align: left; }
    .form-label {
      display: block; font-size: 0.85rem; font-weight: 600;
      color: var(--text-secondary); margin-bottom: 6px;
    }
    .join-footer { margin-top: 24px; font-size: 0.8rem; color: var(--text-muted); }
    .waiting-state { display: none; }
    .waiting-state.active { display: block; }
    .join-state { display: block; }
    .join-state.hidden { display: none; }
    .pulse-ring {
      display: inline-flex; width: 80px; height: 80px; border-radius: 50%;
      background: rgba(124, 58, 237, 0.15); align-items: center;
      justify-content: center; margin: 0 auto 24px; animation: glow-pulse 2s ease infinite;
    }
    .pulse-ring-inner {
      width: 50px; height: 50px; border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
    }
    /* Fun name suggestions */
    .name-suggestions { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
    .name-chip {
      background: rgba(124, 58, 237, 0.1); border: 1px solid rgba(124, 58, 237, 0.2);
      border-radius: 100px; padding: 4px 12px; font-size: 0.75rem; cursor: pointer;
      transition: all 0.2s ease; color: var(--text-secondary);
      font-family: var(--font-handwritten); font-weight: 600;
    }
    .name-chip:hover { background: rgba(124, 58, 237, 0.2); color: var(--text-primary); transform: scale(1.05); }
    /* Shake animation for invalid input */
    .shake-it { animation: shake-input 0.4s ease; }
    @keyframes shake-input {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-3px); }
      80% { transform: translateX(3px); }
    }
    /* Waiting fun facts */
    .fun-fact {
      font-family: var(--font-handwritten); font-size: 1.1rem; color: var(--text-secondary);
      min-height: 50px; transition: opacity 0.3s ease;
    }
    /* Player count animation */
    .player-count-num {
      font-family: var(--font-mono); font-size: 2rem; font-weight: 800;
      color: var(--primary-light); display: inline-block;
      transition: transform 0.2s ease;
    }
    .player-count-num.bump { transform: scale(1.3); }
    @media (max-width: 480px) {
      .join-card { padding: 32px 24px; }
      .join-card h1 { font-size: 1.5rem; }
    }
  </style>
</head>
<body class="grain-overlay">

  <div class="play-page">
    <div class="join-card">

      <!-- Brand -->
      <div style="margin-bottom: 24px;">
        <a href="index.html" class="navbar-brand logo-spin" style="justify-content: center; font-size: 1.1rem;">
          <img src="notesareboring.png" alt="NotesAreBoring" class="logo-img">
        </a>
      </div>

      <!-- Join Form -->
      <div class="join-state" id="join-form">
        <h1>Join the Game</h1>
        <p class="subtitle">No signup. No app. No nonsense.<br>
          <span class="handwritten" style="color: var(--accent); font-size: 1.15rem;">just vibes and quiz questions</span>
        </p>

        <div class="form-group">
          <label class="form-label">Game Code <span class="handwritten" style="color: var(--text-muted); font-weight: 400;">(ask your teacher!)</span></label>
          <input type="text" class="input input-code" id="game-code"
                 placeholder="______" maxlength="6"
                 oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 6); this.style.borderColor = '';">
        </div>

        <div class="form-group">
          <label class="form-label">Your Name <span class="handwritten" style="color: var(--text-muted); font-weight: 400;">(make it good, everyone will see it)</span></label>
          <input type="text" class="input input-lg" id="player-name"
                 placeholder="What should we call you?" maxlength="20"
                 oninput="this.style.borderColor = '';">
          <div class="name-suggestions">
            <span class="name-chip" onclick="pickName('BrainiacBoss')">BrainiacBoss</span>
            <span class="name-chip" onclick="pickName('QuizKhalifa')">QuizKhalifa</span>
            <span class="name-chip" onclick="pickName('NotesNinja')">NotesNinja</span>
            <span class="name-chip" onclick="pickName('BigBrainTime')">BigBrainTime</span>
            <span class="name-chip" onclick="pickName('SleepyScholar')">SleepyScholar</span>
          </div>
        </div>

        <button class="btn btn-accent btn-lg w-full party-btn jelly-hover" style="margin-top: 8px;" onclick="joinGame()">
          Let's Go! â†’
        </button>

        <div class="join-footer">
          <span class="handwritten" style="font-size: 1rem; color: var(--text-muted);">No account needed. Works on literally any device. Yes, even that old phone.</span>
        </div>
      </div>

      <!-- Waiting state -->
      <div class="waiting-state" id="waiting-state">
        <div class="pulse-ring">
          <div class="pulse-ring-inner">ðŸŽ®</div>
        </div>
        <h2 style="font-size: 1.4rem; margin-bottom: 8px;">You're in! ðŸŽ‰</h2>
        <p class="handwritten" style="color: var(--accent); font-size: 1.3rem; margin-bottom: 16px;">waiting for your teacher to hit start...</p>

        <div class="card" style="display: inline-block; padding: 12px 24px;">
          <span style="color: var(--text-muted); font-size: 0.85rem;">Playing as</span><br>
          <span style="font-family: var(--font-heading); font-weight: 700; font-size: 1.2rem;" id="display-name">â€”</span>
        </div>

        <div style="margin-top: 20px;">
          <div style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 4px;">Players in lobby</div>
          <div class="player-count-num" id="player-count">0</div>
          <div class="lobby-players" id="lobby-players" style="margin-top: 12px;"></div>
        </div>

        <div style="margin-top: 24px; padding: 16px; background: rgba(124, 58, 237, 0.05); border-radius: var(--radius-sm);">
          <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px;">While you wait...</div>
          <div class="fun-fact" id="fun-fact">Did you know? The average student checks their phone 96 times a day. At least THIS time it's educational. ðŸ“±</div>
        </div>
      </div>

    </div>
  </div>

  <script>
    document.getElementById('game-code').focus();

    function pickName(name) {
      document.getElementById('player-name').value = name;
      document.getElementById('player-name').style.borderColor = 'var(--correct)';
    }

    const sampleNames = ['Alex', 'Jordan', 'Taylor', 'Morgan', 'Casey', 'Riley', 'Drew', 'Sam', 'Avery', 'Quinn', 'Skyler', 'Charlie', 'Blake', 'Dakota', 'Jamie', 'Frankie'];

    const funFacts = [
      "Did you know? The average student checks their phone 96 times a day. At least THIS time it's educational. ðŸ“±",
      "Fun fact: Studies show competitive quizzes improve retention by 50%. Science says this is good for you. ðŸ§ª",
      "Hot take: Notes are just spoilers for the test. This game is the movie adaptation. ðŸŽ¬",
      "Pro tip: The faster you answer, the more points you get. Speed matters. No pressure. âš¡",
      "Rumor has it the person in 1st place gets extra credit. (We made that up. But wouldn't it be nice?) ðŸ†",
      "The longest winning streak ever recorded was 47 questions. Just saying. No pressure. ðŸ”¥",
      "Your teacher spent like 2 minutes setting this up. Give them a round of applause. ðŸ‘",
    ];
    let factIdx = 0;

    function joinGame() {
      const code = document.getElementById('game-code').value;
      const name = document.getElementById('player-name').value.trim();

      if (code.length !== 6) {
        const el = document.getElementById('game-code');
        el.style.borderColor = 'var(--wrong)';
        el.classList.add('shake-it');
        setTimeout(() => el.classList.remove('shake-it'), 500);
        return;
      }
      if (!name) {
        const el = document.getElementById('player-name');
        el.style.borderColor = 'var(--wrong)';
        el.classList.add('shake-it');
        setTimeout(() => el.classList.remove('shake-it'), 500);
        return;
      }

      document.getElementById('join-form').classList.add('hidden');
      document.getElementById('waiting-state').classList.add('active');
      document.getElementById('display-name').textContent = name;

      const lobby = document.getElementById('lobby-players');
      const countEl = document.getElementById('player-count');
      let added = [name];
      let playerCount = 1;
      countEl.textContent = playerCount;

      // Add self
      const selfEl = document.createElement('div');
      selfEl.className = 'lobby-player';
      selfEl.textContent = name;
      selfEl.style.border = '1px solid var(--accent)';
      selfEl.style.background = 'rgba(236, 72, 153, 0.1)';
      lobby.appendChild(selfEl);

      function addPlayer() {
        if (added.length >= 14) return;
        const available = sampleNames.filter(n => !added.includes(n));
        if (!available.length) return;
        const newName = available[Math.floor(Math.random() * available.length)];
        added.push(newName);
        playerCount++;
        countEl.textContent = playerCount;
        countEl.classList.add('bump');
        setTimeout(() => countEl.classList.remove('bump'), 200);
        const el = document.createElement('div');
        el.className = 'lobby-player';
        el.textContent = newName;
        lobby.appendChild(el);
      }

      let count = 0;
      const interval = setInterval(() => {
        addPlayer();
        count++;
        if (count >= 12) clearInterval(interval);
      }, 700 + Math.random() * 1000);

      // Rotate fun facts
      setInterval(() => {
        const factEl = document.getElementById('fun-fact');
        factEl.style.opacity = '0';
        setTimeout(() => {
          factIdx = (factIdx + 1) % funFacts.length;
          factEl.textContent = funFacts[factIdx];
          factEl.style.opacity = '1';
        }, 300);
      }, 5000);
    }

    document.getElementById('player-name').addEventListener('keydown', e => { if (e.key === 'Enter') joinGame(); });
    document.getElementById('game-code').addEventListener('keydown', e => { if (e.key === 'Enter') document.getElementById('player-name').focus(); });
  </script>

</body>
</html>
